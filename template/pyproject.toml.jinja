[project]
name = "{{ project_name }}"
version = "0.1.0"
description = "Generate a Dash docset for {{ docset_name }} documentation"
readme = "README.md"
requires-python = ">=3.12"
dependencies = [
    "beautifulsoup4",
    "lxml",
    "pillow",
    "poethepoet",
    "requests",
]

[dependency-groups]
dev = [
    "prek",
    "ty",
]

[tool.poe.tasks]
scrape = "uv run main.py --scrape"
build = "uv run main.py --source .cache/{{ docset_identifier }}-docs/{{ docs_domain }}"
verify = "uv run verify.py -v"
clean = { shell = "rm -rf output/ .cache/" }
check = "uv run ty check"

[tool.poe.tasks.all]
help = "Scrape, build, and verify the docset"
sequence = ["scrape", "verify"]

[tool.poe.tasks.rebuild]
help = "Clean and rebuild from scratch"
sequence = ["clean", "scrape", "verify"]

[tool.poe.tasks.verify-contrib]
help = "Verify docset meets Dash contribution requirements"
cmd = "uv run verify_contribution.py -v"

[tool.poe.tasks.contribute]
help = "Prepare files for Dash contribution"
cmd = "uv run contribute.py"

[tool.poe.tasks.submit]
help = "Prepare and submit PR to Dash-User-Contributions"
cmd = "uv run contribute.py --submit"
